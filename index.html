<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

		<link rel="shortcut icon" href="datafiles/icon.ico" />

		<title>Qualli</title>
		<link rel = "Stylesheet"  type = "text/css" href = "Master.css"/>

		<script type="module">
			import * as f from "./datafiles/javascript/functions.js";
			import * as g from "./datafiles/javascript/globals.js";
			import Settings from "./datafiles/javascript/engine/Settings.js";
			import ProgressManager from "./datafiles/javascript/appEtc/ProgressManager.js";

			import Game from "./datafiles/javascript/engine/Game.js";

			// TODO remove workaround
			window.f = f;
			window.g = g;
			window.Settings = Settings;
			window.ProgressManager = ProgressManager;

			window.onload = () => {
				var game = new Game();
				window.game = game;
				}
		</script>
	</head>

	<!-- <body onLoad="main()" onresize="onResize()"> -->
	<body onresize="game.resizeCanvas()">
		<div id="ressources" style="visibility: collapse; position: fixed;">
			<img id="img_Erde" src="datafiles/sprites/Erde3.png" width="0" height="0"/>
			<img id="img_Linsenreflex" src="datafiles/sprites/Linsenreflex.png" width="0" height="0"/>
			<img id="img_Linsenreflex_schwach" src="datafiles/sprites/Linsenreflex_schwach.png" width="0" height="0"/>
			<img id="img_Sterne" src="datafiles/sprites/Sterne.png" width="0" height="0"/>
			<img id="img_Planet" src="datafiles/sprites/Planet.png" width="0" height="0"/>
			<img id="lock" src="datafiles/sprites/lock.png" width="0" height="0"/>

			<img id="qualleRed" src="datafiles/sprites/qualleRed.png" width="0" height="0"/>
			<img id="qualleBlue" src="datafiles/sprites/qualleBlue.png" width="0" height="0"/>
			<img id="qualleGreen" src="datafiles/sprites/qualleGreen.png" width="0" height="0"/>
			<img id="qualleYellow" src="datafiles/sprites/qualleYellow.png" width="0" height="0"/>

			<!-- Medals -->
			<img id="medalGold" src="datafiles/sprites/medals/gold.png" width="0" height="0"/>
			<img id="medalSilver" src="datafiles/sprites/medals/silver.png" width="0" height="0"/>
			<img id="medalBronze" src="datafiles/sprites/medals/bronze.png" width="0" height="0"/>

			<img id="bubble" src="datafiles/sprites/bubble4.png" width="0" height="0"/>


			<img id="bgMenu" src="datafiles/sprites/bg5FullHd.png" width="0" height="0"/>
			<img id="bg0" src="datafiles/sprites/bg8FullHd.png" width="0" height="0"/>
			<img id="bgMenuDark" src="datafiles/sprites/bg5dark.png" width="0" height="0"/>
		</div>

		<div id="endgameOverlay" class="overlay hidden">
			<div id="endgameContent" class="overlayContent">
				<h1>Game Over</h1>
				<h2 id="egWon"></h2>
				<div id="egTime"></div>
				<br>
				<div>
					<input id="egRestart" type="button" value="Restart ‚ôª" onClick="game.room.restart(); f.hideEndgame();" />
					<input id="egResume" type="button" value="Resume ‚ñ∂" onClick="f.hideEndgame();" />
					<input id="egExit" type="button" value="Exit üö™" onClick="game.room.return(); f.hideEndgame()" />
				</div>
			</div>
		</div>

		<div id="pausedOverlay" class="overlay hidden">
			<div id="pausedContent" class="overlayContent">
				<h1>Paused</h1>
				<div>
					<input id="pResume" type="button" value="Resume ‚ñ∂" onClick="Settings.unpause()" />
					<input id="pSettings" type="button" value="Settings ‚öô" onClick="Settings.show()" />
				</div>
				<br>
				<br>
				<div>
					<input id="pRestart" type="button" value="Restart ‚ôª" onClick="if(game.room.restart(true) != false) { Settings.unpause() }" />
					<input id="pExit" type="button" value="Exit üè≥" onClick="game.room.surrender()" />
				</div>
			</div>
		</div>

		<div id="settingsOverlay" class="overlay hidden">
			<div id="settingsContent" class="overlayContent">
				<h1>Settings</h1>
				<br>
				<label for="sMute">Mute</label>
				<input id="sMute" type="checkbox" onchange="Settings.toggleMute()" />
				<br>

				<label for="sScaling">Scaling</label>
				<!-- TODO intialize checkboxes in program -->
				<input id="sScaling" type="checkbox" checked onchange="Settings.toggleScaling()" />
				<br>

				<label for="sJellyGlow">Jelly Glow</label>
				<!-- TODO intialize checkboxes in program -->
				<input id="sJellyGlow" type="checkbox" checked onchange="Settings.toggleJellyGlow()" />
				<br>

				<label for="sExperimental">Experimental</label>
				<input id="sExperimental" type="checkbox" checked onchange="Settings.toggleExperimental()" />
				<br>

				<label for="sDebug">Debug</label>
				<input id="sDebug" type="checkbox" onchange="Settings.toggleDebug()" />
				<br>

				<div>
					<input id="sReset" type="button" value="Reset Progress ‚ôª" onClick="game.progressManager.reset()" />
					<input id="sClose" type="button" value="Close Settings ‚ùå" onClick="Settings.hide()" />
				</div>
			</div>
		</div>

		<noscript>
			<p style="font-size: 1.5em; color: red; background: yellow; text-align: center;">
			Fehler: JavaScript wird nicht unterst√ºtzt oder ist deaktiviert.
			</p>
		</noscript>

	</body>
</html>
